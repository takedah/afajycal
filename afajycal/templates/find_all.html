{% extends 'layout.html' %}
{% block content %}
<header>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4">
    <div class="navbar-nav">
      <a class="navbar-brand text-white-50" href="/" title="Back to home">AFA junior youth match schedules {{ this_year }}</a> 
    </div>
    <div class="navbar-nav mr-2">
      <div class="dropdown show">
        <a class="nav-link dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          チーム名
        </a>

        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
          {% for row in team_names_and_match_number %}
          <a class="dropdown-item" href="./find_all?team_name={{ row[0] }}&category=">{{ row[1] }} ({{ row[2]}})</a>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="navbar-nav mr-auto">
      <div class="dropdown show">
        <a class="nav-link dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          カテゴリ
        </a>

        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
          {% for row in categories %}
          <a class="dropdown-item" href="./find_all?team_name=&category={{ row[0] }}">{{ row[1] }}</a>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="navbar-nav">
      <form class="form-inline" action="./find_all" method="GET">
        <div>
          <input class="form-control mr-sm-2" type="text" name="team_name" value="" placeholder="チーム名を入力">
          <select class="form-control mr-sm-2" name="category">
            <option selected>カテゴリを選択</option>
            {% for row in categories %}
            <option value="{{ row[1] }}">{{ row[1] }}</option>
            {% endfor %}
          </select>
          <button type="submit" class="btn btn-primary my-2 my-sm-0">検索</button>
        </div>
      </form>
    </div>
  </nav>
</header>
<main>
  <div class="container">
    {% if 0 < results_number %}
    <h1 class="h3">検索結果: {{ results_number }}試合 ⚽</h1>
    <div class="alert alert-success mt-4">
      <p>
        チーム名: <strong>{{ team_name }}</strong>
        カテゴリ: <strong>{{ category }}</strong>
      </p>
      <hr>
      <p>
        次の試合日程: <strong>{{ next_game.home_team }} vs {{ next_game.away_team }} ({{ next_game.category }}) {{ next_game.kickoff() }} Kickoff !</strong>
      </p>
    </div>
    <h2 class="h4">試合日程:</h2>
    <table class="table table-striped table-bordered table-hover">
      <caption>最終更新日: {{ last_update }}</caption>
      <thead>
        <tr>
          <th>カテゴリ</th>
          <th>キックオフ</th>
          <th>ホーム</th>
          <th>アウェイ</th>
          <th>会場</th>
          <th>Google Calendar</th>
        </tr>
      </thead>
      <tbody>
        {% for row in schedule %}
        <tr>
          <td>{{ row.category }}</td>
          <td>{{ row.kickoff() }}</td>
          <td>{{ row.home_team }}</td>
          <td>{{ row.away_team }}</td>
          <td>{{ row.studium }}</td>
          <td><a href="{{ row.google_calendar_link() }}" title="googleカレンダーに登録">カレンダーに登録</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <h1 class="h3">検索結果なし</h1>
    <p class="alert alert-danger">
      Team Name: <strong>{{ team_name }}</strong>
      Category: <strong>{{ category }}</strong>
    </p>
    <p class="lead">試合日程は見つかりませんでした...</p>
    {% endif %} 
  </div>
</main>
<footer class="footer mt-auto text-center">
  <div class="container">
    <p>このWebサイトは旭川地区サッカー協会第3種委員会Webサイトからダウンロードしたデータを参考に構成されています。正確な情報は必ず<a href="http://afa11.com/asahijy/" title="旭川地区サッカー協会第3種事業委員会">公式Webサイト</a>を確認してください。</p>
  </div>
</footer>
{% endblock %}
